;; Set variables to allow emacs use alternative home directory
(setq user-init-file (or load-file-name (buffer-file-name)))
(setq user-emacs-directory (file-name-directory user-init-file))

;; Install Flychecker from MELPA stable
(require 'package)
(add-to-list 'package-archives
	     '("MELPA Stable" . "http://stable.melpa.org/packages/") t)
(package-initialize)
(package-refresh-contents)

(package-install 'flycheck)
(global-flycheck-mode)

;; Set C style
(setq c-default-style "bsd"
      c-basic-offset 8)

(add-hook 'c-mode-common-hook
	  '(lambda ()
	     (setq-default
	      tab-width 8
	      indent-tabs-mode t)))

;; Load betty-style C syntax checker and add it to Flycheck checkers list
(load
 (concat
  (file-name-directory user-emacs-directory) "betty/.emacs.d/private/Betty/betty-style"))
(add-to-list 'flycheck-checkers 'betty-style)

;; Enable -Wall -Werror -Extra -pedantic gcc flags
(add-to-list 'flycheck-gcc-warnings "error" t)
(setq flycheck-gcc-pedantic t)
